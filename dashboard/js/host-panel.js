(()=>{"use strict";var t,e={353:(t,e,r)=>{var n,o=r(8e3),a=r(8642),i=r(5803),s=r(2659),l=r(8586),d=r(4170),u=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};i.Z.use(l.ZP);var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),Object.defineProperty(e.prototype,"reps",{get:function(){return this.context.rootState.ReplicantModule.reps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allBids",{get:function(){return this.reps.allBids},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"donationsToRead",{get:function(){return this.reps.donationsToRead},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.reps.totalReplicant},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reader",{get:function(){return this.reps.readerReplicant},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"milestones",{get:function(){return this.reps.milestonesReplicant},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timer",{get:function(){return this.reps.timerReplicant},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeRun",{get:function(){return this.reps.activeRunReplicant},enumerable:!1,configurable:!0}),e.prototype.updateReader=function(t){o.OV.setReplicant({name:"readerReplicant",val:t})},c([(0,d.aU)({rawError:!0})],e.prototype,"updateReader",null),c([(0,d.Yl)({name:"OurModule"})],e)}(d.g4),f=new l.yh({strict:!1,state:{},modules:{ReplicantModule:o.np,OurModule:p}});const v=f;var m=(0,d.rT)(p,f),b=r(3415);var _=r(5440);const g=(0,_.Z)({name:"ReaderPanelTotal",props:["total"]},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grey darken-4 rounded-lg",style:{textAlign:"center"}},[r("b",{style:{fontSize:"48px"}},[t._v(t._s(t.total.formatted))])])}),[],!1,null,"0524371b",null).exports;var h=r(8879),y=r.n(h),w=r(7491),x=r.n(w),O=r(3147),C=r.n(O),P=r(264),R=r.n(P),k=r(7338),T=r.n(k),Z=r(8325),S=r.n(Z);y().extend(x()),y().extend(R()),y().extend(T()),y().extend(C());const j={name:"ReaderPanelBidGoal",props:["bid"],computed:{progress:{get(){return(this.bid.rawTotal/this.bid.rawGoal*100).toFixed(1)}},amountLeft:{get(){return(this.bid.rawGoal-this.bid.rawTotal).toFixed(0)}},etaUntil(){return this.bid.runStartTime?y().unix(this.bid.runStartTime/1e3).tz("Europe/Warsaw").locale(S()).fromNow(!0):void 0},formattedDate(){return y().unix(this.bid.runStartTime/1e3).tz("Europe/Warsaw").locale(S()).format("LLL")}}};var L=r(7618),E=r.n(L),V=r(5250),D=r(266),z=r(5839),B=r(3539),F=(0,_.Z)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rounded pa-2 ma-1 darken-3",class:"CLOSED"===t.bid.state?"green":"grey",staticStyle:{border:"1px solid white"}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("h2",{style:{overflowWrap:"break-word"}},[t._v("\n        "+t._s(t.bid.game)+" - "+t._s(t.bid.name)+"\n      ")]),t._v(" "),r("h5",[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[t.etaUntil?r("i",t._g(t._b({},"i",o,!1),n),[t._v("Ten run odbędzie się planowo za ok. "+t._s(t.etaUntil))]):t._e()]}}])},[t._v(" "),r("span",[t._v(t._s(t.formattedDate))])])],1),t._v(" "),t.bid.longDescription?r("h5",[t._v(t._s(t.bid.longDescription))]):t._e()]),t._v(" "),r("v-progress-linear",{attrs:{value:t.progress,rounded:"",height:"19"}},[[r("strong",[t._v(t._s(t.bid.total)+" / "+t._s(t.bid.goal)+"\n          "),"CLOSED"!=t.bid.state?[t._v("\n            (Pozostało "+t._s(t.amountLeft)+" zł)")]:t._e()],2)]],2)],1)],1)}),[],!1,null,null,null);const M=F.exports;E()(F,{VCol:V.Z,VProgressLinear:D.Z,VRow:z.Z,VTooltip:B.Z}),y().extend(x()),y().extend(R()),y().extend(T()),y().extend(C());const N={name:"ReaderPanelBidWar",props:["bid"],methods:{getProgress(t){return(t.rawTotal/this.bid.rawTotal*100).toFixed(1)}},computed:{etaUntil(){return this.bid.runStartTime?y().unix(this.bid.runStartTime/1e3).tz("Europe/Warsaw").locale(S()).fromNow(!0):void 0},formattedDate(){return y().unix(this.bid.runStartTime/1e3).tz("Europe/Warsaw").locale(S()).format("LLL")}}};var W=(0,_.Z)(N,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rounded pa-2 ma-1 darken-3",class:"CLOSED"===t.bid.state?"green":"grey",staticStyle:{border:"1px solid white"}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("h2",{style:{overflowWrap:"break-word"}},[t._v("\n        "+t._s(t.bid.game)+" - "+t._s(t.bid.name)+"\n      ")]),t._v(" "),r("h5",[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[t.etaUntil?r("i",t._g(t._b({},"i",o,!1),n),[t._v("Ten run odbędzie się planowo za ok. "+t._s(t.etaUntil))]):t._e()]}}])},[t._v(" "),r("span",[t._v(t._s(t.formattedDate))])])],1),t._v(" "),t.bid.longDescription?r("h5",[t._v(t._s(t.bid.longDescription))]):t._e()]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[t._l(t.bid.options,(function(e,n){return t.bid.options.length>0?[r("h3",{style:{overflowWrap:"break-word"}},[t._v("\n          "+t._s(n+1)+". "+t._s(e.name)+" - "+t._s(e.total)+"\n        ")]),t._v(" "),r("v-progress-linear",{attrs:{value:t.getProgress(e),rounded:"",height:"10"}})]:r("h3",[t._v("Brak opcji")])}))],2)],1)],1)}),[],!1,null,null,null);const $=W.exports;E()(W,{VCol:V.Z,VProgressLinear:D.Z,VRow:z.Z,VTooltip:B.Z});const A={name:"ReaderPanelBids",data:()=>({bidfilter:"",updating:!1,refreshTimer:void 0,timeLeft:20,timestamp:Date.now()}),components:{ReaderPanelBidGoal:M,ReaderPanelBidWar:$},props:["bids"],methods:{bidName:t=>`${t.game} - ${t.name}`.toLowerCase(),updateBids(){nodecg.sendMessage("updateBids")},startRefreshCountdown(){this.refreshTimer=setInterval((()=>{1==this.timeLeft&&(clearInterval(this.refreshTimer),this.timeLeft=0),this.timeLeft-=1}),1e3)}},mounted(){nodecg.listenFor("bids:updating",(()=>{clearInterval(this.refreshTimer),this.updating=!0})),nodecg.listenFor("bids:updated",(()=>{this.timeLeft=20,this.startRefreshCountdown(),this.updating=!1,this.timestamp=Date.now()})),this.startRefreshCountdown()}};var I=r(4385),U=r(5399),G=r(7047),Y=r(9500),J=(0,_.Z)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"grey darken-4 rounded-lg",staticStyle:{height:"600px",width:"600px",display:"flex","flex-direction":"column"},attrs:{id:"bids"}},[r("h3",{staticClass:"grey darken-3 pa-1 rounded-tl-lg rounded-tr-lg",staticStyle:{width:"100%","text-align":"center",position:"sticky"}},[t._v("\n      LICYTACJE\n    ")]),t._v(" "),r("div",{attrs:{id:"refreshCountdown"}},[r("v-progress-linear",{attrs:{indeterminate:t.updating,value:(t.timeLeft/20*100).toFixed(1),height:"12"}}),t._v(" "),r("div",{staticClass:"mt-3"},[t.updating?r("p",[t._v("Odświeżam...")]):r("p",[t._v("\n          Odświeżam za "),r("b",[t._v(t._s(t.timeLeft))]),t._v(" sekund...\n        ")])])],1),t._v(" "),r("v-divider"),t._v(" "),r("div",{staticClass:"mx-3",attrs:{id:"filter"}},[r("v-text-field",{staticClass:"mt-6",attrs:{dense:"",outlined:"",placeholder:"Filtruj...",clearable:""},model:{value:t.bidfilter,callback:function(e){t.bidfilter=e},expression:"bidfilter"}}),t._v(" "),r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mt-4 ml-2",attrs:{disabled:t.updating,loading:t.updating,fab:""},on:{click:t.updateBids}},"v-btn",o,!1),n),[r("v-icon",[t._v("mdi-refresh")])],1)]}}])},[t._v(" "),r("span",[t._v("Odśwież licytacje ręcznie")])])],1),t._v(" "),r("v-divider"),t._v(" "),r("div",{staticClass:"pa-2",staticStyle:{height:"100%",overflow:"auto"}},[r("div",{attrs:{id:"open-bids"}},[t._l(t.bids,(function(e){return["challenge"===e.type&&t.bidName(e).includes(t.bidfilter)&&"OPENED"===e.state?r("reader-panel-bid-goal",{key:t.timestamp+e.id,attrs:{bid:e}}):t._e(),t._v(" "),"challenge"!=e.type&&t.bidName(e).includes(t.bidfilter)&&"OPENED"===e.state?r("reader-panel-bid-war",{key:t.timestamp+e.id,attrs:{bid:e}}):t._e()]}))],2),t._v(" "),r("div",{attrs:{id:"closed-bids"}},[t._l(t.bids,(function(e){return["challenge"===e.type&&t.bidName(e).includes(t.bidfilter)&&"CLOSED"===e.state?r("reader-panel-bid-goal",{key:t.timestamp+e.id,attrs:{bid:e}}):t._e(),t._v(" "),"challenge"!=e.type&&t.bidName(e).includes(t.bidfilter)&&"CLOSED"===e.state?r("reader-panel-bid-war",{key:t.timestamp+e.id,attrs:{bid:e}}):t._e()]}))],2)])],1)])}),[],!1,null,"443b4b38",null);const q=J.exports;E()(J,{VBtn:I.Z,VDivider:U.Z,VIcon:G.Z,VProgressLinear:D.Z,VTextField:Y.Z,VTooltip:B.Z});const H={name:"ReaderPanelMilestone",props:["milestone","met","total"],computed:{progress:{get(){return(this.total/this.milestone.amount*100).toFixed(1)}},amountLeft:{get(){return(this.milestone.amount-this.total).toFixed(0)}}}};var K=(0,_.Z)(H,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rounded pa-2 ma-1 darken-3",class:t.met?"green":"grey",staticStyle:{border:"1px solid white"}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("h2",[t._v(t._s(t.milestone.name))])]),t._v(" "),r("v-progress-linear",{attrs:{value:t.progress,rounded:"",height:"19"}},[[r("strong",[t._v(t._s(t.total)+" zł / "+t._s(t.milestone.amount)+" zł\n          "),t.met?t._e():[t._v("\n            (Pozostało "+t._s(t.amountLeft)+" zł)")]],2)]],2)],1)],1)}),[],!1,null,null,null);const Q=K.exports;E()(K,{VCol:V.Z,VProgressLinear:D.Z,VRow:z.Z});const X={name:"ReaderPanelMilestones",props:["milestones","total"],data:()=>({filter:"",updating:!1}),components:{ReaderPanelMilestone:Q},methods:{update(){nodecg.sendMessage("updateMilestones")}},mounted(){nodecg.listenFor("milestones:updating",(()=>{clearInterval(this.refreshTimer),this.updating=!0})),nodecg.listenFor("milestones:updated",(()=>{this.updating=!1}))}};var tt=(0,_.Z)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grey darken-4 rounded-lg",staticStyle:{height:"517px",width:"500px",display:"flex","flex-direction":"column"},attrs:{id:"milestones"}},[r("h3",{staticClass:"grey darken-3 pa-1 rounded-tl-lg rounded-tr-lg",staticStyle:{width:"100%","text-align":"center",position:"sticky"}},[t._v("\n    CELE\n  ")]),t._v(" "),r("div",{staticClass:"mx-3",attrs:{id:"filter"}},[r("v-text-field",{staticClass:"mt-6",attrs:{dense:"",outlined:"",placeholder:"Filtruj...",clearable:""},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mt-4 ml-2",attrs:{disabled:t.updating,loading:t.updating,fab:""},on:{click:t.update}},"v-btn",o,!1),n),[r("v-icon",[t._v("mdi-refresh")])],1)]}}])},[t._v(" "),r("span",[t._v("Odśwież listę celi ręcznie")])])],1),t._v(" "),r("v-divider"),t._v(" "),r("div",{staticClass:"pa-2",staticStyle:{height:"100%",overflow:"auto"}},[r("div",{attrs:{id:"open-milestones"}},[t._l(t.milestones,(function(e){return[e.name.toLowerCase().includes(t.filter)&&t.total.raw<e.amount?r("reader-panel-milestone",{key:e.name,attrs:{milestone:e,met:t.total.raw>=e.amount,total:t.total.raw}}):t._e()]}))],2),t._v(" "),r("div",{attrs:{id:"closed-milestones"}},[t._l(t.milestones,(function(e){return[e.name.toLowerCase().includes(t.filter)&&t.total.raw>=e.amount?r("reader-panel-milestone",{key:e.name,attrs:{milestone:e,met:t.total.raw>=e.amount,total:t.total.raw}}):t._e()]}))],2)])],1)}),[],!1,null,"bfa0bd5e",null);const et=tt.exports;E()(tt,{VBtn:I.Z,VDivider:U.Z,VIcon:G.Z,VTextField:Y.Z,VTooltip:B.Z});var rt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nt=function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};const ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.updateReader=function(t){m.updateReader(t)},nt([b.aD],e.prototype,"allBids",void 0),nt([b.aD],e.prototype,"total",void 0),nt([b.aD],e.prototype,"milestones",void 0),nt([(0,s.wA)({components:{ReaderPanelTotal:g,ReaderPanelBids:q,ReaderPanelMilestones:et}})],e)}(s.w3);var at=r(969),it=r(7887),st=(0,_.Z)(ot,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-container",{attrs:{fluid:""}},[r("div",{attrs:{id:"host-container"}},[r("div",{staticClass:"column",attrs:{id:"left"}},[r("reader-panel-bids",{staticClass:"panel",attrs:{bids:t.allBids}})],1),t._v(" "),r("div",{staticClass:"column",attrs:{id:"middle"}},[r("reader-panel-total",{staticClass:"panel",attrs:{total:t.total}}),t._v(" "),r("reader-panel-milestones",{staticClass:"panel",attrs:{milestones:t.milestones,total:t.total}})],1)])])],1)}),[],!1,null,null,null);const lt=st.exports;E()(st,{VApp:at.Z,VContainer:it.Z}),(0,o.rl)(v).then((function(){new i.Z({vuetify:a.Z,store:v,el:"#App",render:function(t){return t(lt)}})}))}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var a=r[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.m=e,t=[],n.O=(e,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<t.length;u++){for(var[r,o,a]=t[u],s=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((t=>n.O[t](r[l])))?r.splice(l--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var d=o();void 0!==d&&(e=d)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,o,a]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={865:0,238:0,786:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,a,[i,s,l]=r,d=0;if(i.some((e=>0!==t[e]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var u=l(n)}for(e&&e(r);d<i.length;d++)a=i[d],n.o(t,a)&&t[a]&&t[a][0](),t[i[d]]=0;return n.O(u)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n.O(void 0,[273,81,385,969,238,536,963,786,539,910],(()=>n(353)));o=n.O(o)})();